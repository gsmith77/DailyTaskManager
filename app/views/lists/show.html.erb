<%= flash[:alert] %>
<h1 id="list_title"><%= @list.title %></h1><br><br>
<%= hidden_field_tag @list.id %>
<% if @completed_tasks.present? %>
<h3>Completed Tasks:</h3><br>
    <% @completed_tasks.each do |task| %>
        <%= render partial: 'content', locals: {task: task}%>
        <%= render partial: 'tasks/status', locals: {task: task} %><br><br>
    <% end %>
<% end %>
<% if @completed_tasks.nil? %>
<h3>Incomplete Tasks:</h3><br>
    <% @incomplete_tasks.each do |task| %>
        <%= render partial: 'content', locals: {task: task}%><br>
        <%= render partial: 'tasks/status', locals: {task: task} %><br><br>
    <% end %>
<% end %><br><br>

<% if @list.user_id == current_user.id %>
    <%= link_to "Create New Task", new_list_task_path(@list) %><br>
    <%= link_to "Delete List", list_path(@list), method: 'delete' %>
<% end %>
<%= render partial: 'error_message', locals: {task: @task} %>
<br>
<%= link_to "Back to #{current_user.name.capitalize}'s Page", user_path(current_user) %><br><br>
<%= link_to "#{current_user.name.capitalize}'s List's Page", user_lists_path(current_user) %><br><br>

<%= link_to "All Tasks", list_tasks_path(@list) %><br><br>
<%= link_to "Completed Tasks", user_list_path(current_user, @list) %><br><br>
<%= link_to "Incomplete Tasks", list_tasks_path(@list) %><br><br>
<%= link_to "All Lists in Database", lists_path %>
<button id="single_list">Click Here Baby for This List Using Javascript</button>

<script type="text/javascript" charset="utf-8">
$(document).on("turbolinks:load", function(){
    $('#single_list').click(function(){
    $.ajax({method:"GET", url:`http://localhost:3000/lists/`, dataType: "json", success: function(data){
        alert('it worked!')
        let trueObject = data.find(function(object){
            return object.id === <%= @list.id %>
        })
        //ajax request only grabs the first argument for the URL, '/lists/ for example'
        window.location = "/lists/#{trueObject['id']}"
        //document.getElementById('single_list').innerHTML = trueObject["title"]
        }
    })
    });
})
</script>